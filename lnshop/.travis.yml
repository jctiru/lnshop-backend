language: generic

services:
  - docker

install: skip

script:
  - ./mvnw clean package -Dmaven.test.skip=true
  - docker build -t jctiru/lnshop-backend .

after_success:
  - echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_ID" --password-stdin
  - docker push jctiru/lnshop-backend

branches:
  only:
    - master
